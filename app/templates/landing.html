<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>White’s Painting & Renovations — Free Estimate</title>

  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#0f1b33;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.16);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --shadow: 0 18px 60px rgba(0,0,0,.45);

      --brandA:#fbbf24; /* amber */
      --brandB:#f59e0b;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      min-height:100vh;

      /* ✅ If you want your uploaded image as background:
         Put your image in /app/static/bg.png and use: url("/static/bg.png")
      */
      background:
        radial-gradient(1100px 600px at 10% 10%, rgba(99,102,241,.35), transparent 55%),
        radial-gradient(900px 520px at 90% 15%, rgba(56,189,248,.25), transparent 55%),
        radial-gradient(900px 520px at 55% 100%, rgba(34,197,94,.18), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* Optional background image overlay (uncomment when you add /static/bg.png)
    body::before{
      content:"";
      position:fixed; inset:0;
      background: url("/static/bg.png") no-repeat center center fixed;
      background-size: cover;
      opacity: .18;
      pointer-events:none;
      filter: saturate(1.1) contrast(1.05);
      mix-blend-mode: screen;
    }
    */

    .wrap{
      max-width: 1050px;
      margin: 0 auto;
      padding: 34px 18px 70px;
      position:relative;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 18px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 280px;
    }

    .logo{
      width:44px; height:44px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      font-weight: 900;
      letter-spacing:.5px;
    }

    .brand h2{
      margin:0;
      font-size: 15px;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .brand p{
      margin:2px 0 0;
      color: var(--muted);
      font-size: 12.5px;
    }

    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(8px);
      font-size: 13px;
      color: rgba(255,255,255,.85);
    }

    .hero{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items: stretch;
      margin-top: 12px;
    }
    @media (max-width: 900px){
      .hero{ grid-template-columns:1fr; }
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(700px 240px at 30% 0%, rgba(255,255,255,.16), transparent 55%);
      pointer-events:none;
    }
    .panel-inner{
      padding: 22px;
      position:relative;
      z-index:1;
    }

    h1{
      margin: 0 0 10px;
      font-size: clamp(30px, 3.4vw, 44px);
      letter-spacing: -0.02em;
      line-height: 1.05;
    }
    .sub{
      margin:0 0 14px;
      color: var(--muted);
      font-size: 15.5px;
      line-height:1.5;
    }

    .badges{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin: 14px 0 0;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      font-size: 13px;
      color: rgba(255,255,255,.82);
    }

    /* 3D Button */
    .btn3d{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      border:0;
      cursor:pointer;
      padding: 14px 16px;
      border-radius: 14px;
      color: #1a1204;
      font-weight: 900;
      letter-spacing: .2px;
      background: linear-gradient(180deg, var(--brandA), var(--brandB));
      box-shadow:
        0 12px 0 rgba(0,0,0,.28),
        0 18px 30px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.55);
      transform: translateY(0);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      user-select:none;
      width: 100%;
    }
    .btn3d:hover{ filter: brightness(1.03); }
    .btn3d:active{
      transform: translateY(10px);
      box-shadow:
        0 2px 0 rgba(0,0,0,.28),
        0 8px 16px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.45);
    }

    .btnGhost{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.16);
      color: rgba(255,255,255,.92);
      font-weight: 800;
      cursor:pointer;
      box-shadow: 0 16px 40px rgba(0,0,0,.22);
      transition: transform .12s ease, background .12s ease;
      width: 100%;
    }
    .btnGhost:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
    .btnGhost:active{ transform: translateY(1px); }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 650px){ .grid{ grid-template-columns:1fr; } }

    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom: 10px;
    }
    label{
      font-size: 13px;
      color: rgba(255,255,255,.78);
    }
    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
      outline:none;
    }
    input::placeholder, textarea::placeholder{ color: rgba(255,255,255,.45); }
    textarea{ min-height: 96px; resize: vertical; }

    .hint{
      font-size: 12.5px;
      color: rgba(255,255,255,.65);
      line-height:1.45;
      margin-top: 10px;
    }

    .status{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      display:none;
    }
    .status.show{ display:block; }
    .status.ok{ border-color: rgba(34,197,94,.35); }
    .status.bad{ border-color: rgba(239,68,68,.35); }

    .fineprint{
      margin-top: 12px;
      font-size: 12px;
      color: rgba(255,255,255,.60);
      line-height:1.45;
    }

    .cards{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    .card{
      padding: 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.14);
    }
    .card b{ display:block; margin-bottom: 4px; }
    .card span{ color: rgba(255,255,255,.74); font-size: 13.5px; }

    .two-col{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (max-width: 650px){ .two-col{ grid-template-columns:1fr; } }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo">W</div>
        <div>
          <h2>White’s Painting & Renovations</h2>
          <p>Ukiah, CA • Free Estimates • Financing Available</p>
        </div>
      </div>

      <div class="pill">📞 Call/Text: <b>707-350-1569</b></div>
    </div>

    <div class="hero">
      <!-- Left: hero copy -->
      <div class="panel">
        <div class="panel-inner">
          <h1>Modern Painting & Remodel Work — Done Right.</h1>
          <p class="sub">
            Tell us about your project and we’ll text you back to schedule a quick walkthrough.
            Fast, professional, and clean work — serving Mendocino & Lake County.
          </p>

          <div class="badges">
            <div class="badge">✅ Interior & Exterior Painting</div>
            <div class="badge">✅ Cabinets & Trim</div>
            <div class="badge">✅ Drywall & Repairs</div>
            <div class="badge">✅ Flooring & Remodel</div>
          </div>

          <div class="cards">
            <div class="card">
              <b>What happens next?</b>
              <span>After you submit, Sally will text you to confirm details and lock in a time.</span>
            </div>
            <div class="card">
              <b>Keep it simple</b>
              <span>Address + project type + best contact number is all we need to start.</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: form -->
      <div class="panel">
        <div class="panel-inner">
          <h2 style="margin:0 0 10px; font-size:18px;">Request a Free Estimate</h2>

          <form id="leadForm" autocomplete="on">
            <div class="grid">
              <div class="field">
                <label for="first_name">First name (optional)</label>
                <input id="first_name" name="first_name" placeholder="John Smith" />
              </div>

              <div class="field">
                <label for="phone">Phone (required)</label>
                <input id="phone" name="phone" placeholder="(707) 555-1234" required />
              </div>
            </div>

            <div class="grid">
              <div class="field">
                <label for="project_type">Project type (required)</label>
                <select id="project_type" name="project_type" required>
                  <option value="">Select…</option>
                  <option>Interior Painting</option>
                  <option>Exterior Painting</option>
                  <option>Cabinet Painting</option>
                  <option>Drywall Repair</option>
                  <option>Flooring</option>
                  <option>Bathroom Remodel</option>
                  <option>Deck / Fence</option>
                  <option>Other</option>
                </select>
              </div>

              <div class="field">
                <label for="city">City (required)</label>
                <input id="city" name="city" placeholder="Ukiah" required />
              </div>
            </div>

            <div class="field">
              <label for="address">Property address (required)</label>
              <input id="address" name="address" placeholder="123 Main St" required />
            </div>

            <div class="field">
              <label for="notes">Notes (optional)</label>
              <textarea id="notes" name="notes" placeholder="What rooms? Any deadlines? Occupied or vacant?"></textarea>
            </div>

            <div class="two-col">
              <button class="btn3d" type="submit">🚀 Submit Request</button>
              <button class="btnGhost" type="button" id="callBtn">📞 Call Now</button>
            </div>

            <div id="status" class="status"></div>

            <div class="fineprint">
              By submitting, you agree to receive texts about your estimate request. Reply STOP to opt out, HELP for help.
              Msg & data rates may apply.
            </div>
          </form>

          <div class="hint">
            Tip: Your endpoint requires <b>phone, address, city, project_type</b>. If any are missing, it will return 400.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('leadForm');
    const statusBox = document.getElementById('status');
    const callBtn = document.getElementById('callBtn');

    callBtn.addEventListener('click', () => {
      // For desktop, this may open a calling app or do nothing. Still useful on mobile.
      window.location.href = "tel:+17073501569";
    });

    function showStatus(ok, msg){
      statusBox.className = "status show " + (ok ? "ok" : "bad");
      statusBox.textContent = msg;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = {
        first_name: document.getElementById('first_name').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        project_type: document.getElementById('project_type').value.trim(),
        address: document.getElementById('address').value.trim(),
        city: document.getElementById('city').value.trim(),
        notes: document.getElementById('notes').value.trim()
      };

      // Basic client-side validation
      if (!payload.phone || !payload.address || !payload.city || !payload.project_type){
        showStatus(false, "Please fill out Phone, Project Type, Address, and City.");
        return;
      }

      // Disable submit to prevent double posts
      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = "Sending…";

      try{
        const res = await fetch('/web/lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const data = await res.json().catch(() => ({}));

        if (res.ok && (data.ok === true || data.ok === undefined)) {
          showStatus(true, "✅ Submitted! Sally will text you shortly to schedule.");
          form.reset();
        } else {
          const err = data.error || ("Request failed (" + res.status + ").");
          showStatus(false, "❌ " + err);
        }
      } catch (err){
        showStatus(false, "❌ Network error. If you're using ngrok, make sure HTTPS is working and the server is running.");
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = "🚀 Submit Request";
      }
    });
  </script>
</body>
</html>
